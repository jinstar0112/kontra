<!DOCTYPE html>
<html>
<head>
  <title>Kontra.js – Pool</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.16.0/themes/prism.min.css">
  <link rel="stylesheet" href="../styles.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.16.0/prism.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.16.0/components/prism-javascript.min.js"></script>
  <script src="../../js/kontra.js"></script>
</head>
<body>
  <div class="content">
    <header class="main-nav">
      <h1 id="kontra-heading">Kontra</h1>
      <a href="#main">Skip navigation</a>

      <nav aria-labelledby="kontra-heading">
        <button class="menu-button" aria-expanded="false" aria-controls="menu"><span aria-hidden="true">☰</span> Menu</button>

        <!-- add role=list back to list so screen readers still read it as list when
             css list-style: none is set
             @see https://web-a11y.slack.com/archives/C042TSFGN/p1501699529181172 -->
        <ul id="menu" role="list">
          <li><a href="/">Introduction</a></li>
          <li><a href="/getting-started">Getting Started</a></li>
          <li><a href="/download">Download</a></li>
          <li><a href="/tutorials">Tutorials</a></li>
          <li><a href="/made-with-kontra">Made With Kontra</a></li>

          <li>
            <h2 id="api">API</h2>
            <ul aria-labelledby="api">
              <li><a href="/api/animation.html">Animation</a></li>
              <li><a href="/api/core.html">Core</a></li>
              <li><a href="/api/events.html">Events</a></li>
              <li><a href="/api/pool.html">Pool</a></li>
              <li><a href="/api/sprite.html">Sprite</a></li>
              <li><a href="/api/store.html">Store</a></li>
              <li><a href="/api/vector.html">Vector</a></li>
            </ul>
          </li>
        </ul>
    </header>

    <main id="main">
      <div>
        <h1>Pool(&#8203;properties)
        </h1>

        <p>A fast and memory efficient object pool for sprite reuse. Perfect for particle systems or SHUMPs. The pool starts out with just 1 object, but will grow in size to accommodate as many objects as are needed.</p>
<pre><code class="lang-js">import { Pool, Sprite } from &#39;kontra&#39;;

let pool = Pool({
  create: Sprite,
  maxSize: 100
});
</code></pre>
        <h3 id="title-Pool"><span class="visually-hidden">Pool</span> Parameters</span></h3>
        <dl aria-labelledby="title-Pool">
          <dt>
            <code>properties</code>
            
          </dt>
          <dd><p>Object. Properties of the pool.</p>
        </dd>
          <dt>
            <code>properties.create</code>
            
          </dt>
          <dd><p>Function. Function that returns a new object to be added to the pool when there are no objects able to be reused.</p>
        </dd>
          <dt>
            <code>properties.maxSize</code>
            <span class="optional">Optional</span>
          </dt>
          <dd><p>Number. The maximum number of objects allowed in the pool. The pool will never grow beyond this size. Defaults to <code>1024</code>.</p>
        </dd>
        </dl>
        

        <section class="toc">
          <h2 id="toc"><a href="#toc" class="section-link">Table of Contents<span aria-hidden="true">#</span></a></h2>

          <ul aria-labeledby="toc">
            <li>
              <ul>
                <li><a href="#basic-use">Basic Use</a></li>
              </ul>
            </li>

            <li>
              <h3 id="properties">Properties</h3>
              <ul aria-labeledby="properties">
                <li>
                  <a href="#maxSize">
                    <span>Pool&#8203;.maxSize</span>
                  </a>
                </li>
                <li>
                  <a href="#objects">
                    <span>Pool&#8203;.objects</span>
                  </a>
                </li>
                <li>
                  <a href="#size">
                    <span>Pool&#8203;.size</span>
                  </a>
                </li>
              </ul>
            </li>

            <li>
              <h3 id="methods">Methods</h3>
              <ul aria-labeledby="methods">
                <li>
                  <a href="#clear">
                    <span>Pool&#8203;.clear()</span>
                  </a>
                </li>
                <li>
                  <a href="#get">
                    <span>Pool&#8203;.get(properties)</span>
                  </a>
                </li>
                <li>
                  <a href="#getAliveObjects">
                    <span>Pool&#8203;.getAliveObjects()</span>
                  </a>
                </li>
                <li>
                  <a href="#render">
                    <span>Pool&#8203;.render()</span>
                  </a>
                </li>
                <li>
                  <a href="#update">
                    <span>Pool&#8203;.update([dt])</span>
                  </a>
                </li>
              </ul>
            </li>
          </ul>
        </section>

        <section>
          <h2 id="basic-use">
            <a href="#basic-use" class="section-link">
              <span>Basic Use</span>
              <span aria-hidden="true">#</span>
            </a>
          </h2>

          <p>To use the pool, you must pass the <code>create()</code> function, which should return a new <a href="Sprite.html">Sprite</a> or object. This object will be added to the pool every time there are no more alive objects.</p>
<p>The object must implement the functions <code>update(dt)</code>, <code>init(properties)</code>, and <code>isAlive()</code>. If one of these functions is missing the pool will throw an error. <a href="Sprite.html">Sprite</a> defines these functions for you.</p>
<p>An object is available for reuse when its <code>isAlive()</code> function returns <code>false</code>. For a sprite, this is typically when its ttl is <code>0</code>.</p>
<p>When you want an object from the pool, use the pools <code>get(properties)</code> function and pass it any properties you want the newly initialized object to have.</p>
<pre><code class="lang-js">let pool = Pool({
  // create a new sprite every time the pool needs new objects
  create: Sprite
});

// properties will be passed to the sprites init() function
pool.get({
  x: 100,
  y: 200,
  width: 20,
  height: 40,
  color: &#39;red&#39;,
  ttl: 60
});
</code></pre>
<p>When you want to update or render all alive objects in the pool, use the pools <code>update()</code> and <code>render()</code> functions.</p>
<pre><code class="lang-js">let loop = GameLoop({
  update: function() {
    pool.update();
  },
  render: function() {
    pool.render();
  }
});
</code></pre>
        </section>

        <section>
          <h2 id="clear">
            <a href="#clear" class="section-link">
              <span>Pool&#8203;.clear()</span>
              <span aria-hidden="true">#</span>
            </a>
          </h2>

          <p>Clear the object pool. Removes all objects from the pool and resets its <a href="#size">size</a> to 1.</p>
          
        </section>
        <section>
          <h2 id="get">
            <a href="#get" class="section-link">
              <span>Pool&#8203;.get(properties)</span>
              <span aria-hidden="true">#</span>
            </a>
          </h2>

          <p>Get and return an object from the pool. The properties parameter will be passed directly to the objects <code>init(properties)</code> function. If you&#39;re using a <a href="Sprite.html">Sprite</a>, you should also pass the <code>ttl</code> property to designate how many frames you want the object to be alive for.</p>
<p>If you want to control when the sprite is ready for reuse, pass <code>Infinity</code> for <code>ttl</code>. You&#39;ll need to set the sprites <code>ttl</code> to <code>0</code> when you&#39;re ready for the sprite to be reused.</p>
<pre><code class="lang-js">let sprite = pool.get({
  // the object will get these properties and values
  x: 100,
  y: 200,
  width: 20,
  height: 40,
  color: &#39;red&#39;,

  // pass Infinity for ttl to prevent the object from being reused
  // until you set it back to 0
  ttl: Infinity
});
</code></pre>
          <h3 id="title-get"><span class="visually-hidden">get</span> Parameters</span></h3>
          <dl aria-labelledby="title-get">
            <dt>
              <code>properties</code>
              
            </dt>
            <dd><p>Object. Properties to pass to the objects <code>init(properties)</code> function.</p>
          </dd>
          </dl>
          
          <h3><span class="visually-hidden">get</span> Return value</h3>
          <p><p>The newly initialized object.</p>
          </p>
        </section>
        <section>
          <h2 id="getAliveObjects">
            <a href="#getAliveObjects" class="section-link">
              <span>Pool&#8203;.getAliveObjects()</span>
              <span aria-hidden="true">#</span>
            </a>
          </h2>

          <p>Returns an array of all alive objects. Useful if you need to do special processing on all alive objects outside of the pool, such as add all alive objects to a <a href="Quadtree.html">Quadtree</a>.</p>
          
          <h3><span class="visually-hidden">getAliveObjects</span> Return value</h3>
          <p><p>An Array of all alive objects.</p>
          </p>
        </section>
        <section>
          <h2 id="maxSize">
            <a href="#maxSize" class="section-link">
              <span>Pool&#8203;.maxSize</span>
              <span aria-hidden="true">#</span>
            </a>
          </h2>

          <p>Number. The maximum number of objects allowed in the pool. The pool will never grow beyond this size.</p>
          
        </section>
        <section>
          <h2 id="objects">
            <a href="#objects" class="section-link">
              <span>Pool&#8203;.objects</span>
              <span aria-hidden="true">#</span>
            </a>
          </h2>

          <p>An Array of Objects. All objects currently in the pool, both alive and not alive.</p>
          
        </section>
        <section>
          <h2 id="render">
            <a href="#render" class="section-link">
              <span>Pool&#8203;.render()</span>
              <span aria-hidden="true">#</span>
            </a>
          </h2>

          <p>Render all alive objects in the pool by calling the objects <code>render()</code> function.</p>
          
        </section>
        <section>
          <h2 id="size">
            <a href="#size" class="section-link">
              <span>Pool&#8203;.size</span>
              <span aria-hidden="true">#</span>
            </a>
          </h2>

          <p>Number. The number of alive objects.</p>
          
        </section>
        <section>
          <h2 id="update">
            <a href="#update" class="section-link">
              <span>Pool&#8203;.update([dt])</span>
              <span aria-hidden="true">#</span>
            </a>
          </h2>

          <p>Update all alive objects in the pool by calling the objects update() function. This function also manages when each object should be recycled, so it is recommended that you do not call the objects update() function outside of this function.</p>
          <h3 id="title-update"><span class="visually-hidden">update</span> Parameters</span></h3>
          <dl aria-labelledby="title-update">
            <dt>
              <code>dt</code>
              <span class="optional">Optional</span>
            </dt>
            <dd><p>Number. Time since last update.</p>
          </dd>
          </dl>
          
        </section>

      </div>
    </main>
  </div>

</body>
</html>