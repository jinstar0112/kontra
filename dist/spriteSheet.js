kontra.animation=function(t){var i=Object.create(kontra.animation.prototype);return i._i(t),i},kontra.animation.prototype={_i:function(t,i){t=t||{},this.spriteSheet=t.spriteSheet,this.frames=t.frames,this.frameRate=t.frameRate,this.loop=void 0===t.loop||t.loop,i=t.spriteSheet.frame,this.width=i.width,this.height=i.height,this.margin=i.margin||0,this._f=0,this._a=0},clone:function(){return kontra.animation(this)},reset:function(){this._f=0,this._a=0},update:function(t){if(this.loop||this._f!=this.frames.length-1)for(t=t||1/60,this._a+=t;1<=this._a*this.frameRate;)this._f=++this._f%this.frames.length,this._a-=1/this.frameRate},render:function(t){var i=(t=t||{}).context||kontra.context,e=this.frames[this._f]/this.spriteSheet._f|0,a=this.frames[this._f]%this.spriteSheet._f|0;i.drawImage(this.spriteSheet.image,a*this.width+(2*a+1)*this.margin,e*this.height+(2*e+1)*this.margin,this.width,this.height,t.x,t.y,this.width,this.height)}},kontra.spriteSheet=function(t){var i=Object.create(kontra.spriteSheet.prototype);return i._i(t),i},kontra.spriteSheet.prototype={_i:function(t){t=t||{},this.animations={},this.image=t.image,this.frame={width:t.frameWidth,height:t.frameHeight,margin:t.frameMargin},this._f=t.image.width/t.frameWidth|0,this.createAnimations(t.animations)},createAnimations:function(t){var i,e,a,h;for(h in t)e=(i=t[h]).frames,a=[],[].concat(e).map(function(t){a=a.concat(this._p(t))},this),this.animations[h]=kontra.animation({spriteSheet:this,frames:a,frameRate:i.frameRate,loop:i.loop})},_p:function(t){if(+t===t)return t;var e=[],a=t.split(".."),h=i=+a[0],r=+a[1];if(h<r)for(;i<=r;i++)e.push(i);else for(;i>=r;i--)e.push(i);return e}};