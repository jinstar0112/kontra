var kontra=function(t,i,n){"use strict";return t.vector=function(i){var n=Object.create(t.vector.prototype);return n._init(i),n},t.vector.prototype={_init:function(t){return t=t||{},this.x=t.x||0,this.y=t.y||0,this},add:function(t,i){this.x+=(t.x||0)*(i||1),this.y+=(t.y||0)*(i||1)},clamp:function(t,e,s,h){this._xMin=t!==n?t:-(1/0),this._xMax=s!==n?s:1/0,this._yMin=e!==n?e:-(1/0),this._yMax=h!==n?h:1/0,this._x=this.x,this._y=this.y,Object.defineProperties(this,{x:{get:function(){return this._x},set:function(t){this._x=i.min(i.max(t,this._xMin),this._xMax)}},y:{get:function(){return this._y},set:function(t){this._y=i.min(i.max(t,this._yMin),this._yMax)}}})}},t.sprite=function(i){var n=Object.create(t.sprite.prototype);return n.init(i),n},t.sprite.prototype={init:function(i){i=i||{},this.position=(this.position||t.vector())._init({x:i.x,y:i.y}),this.velocity=(this.velocity||t.vector())._init({x:i.dx,y:i.dy}),this.acceleration=(this.acceleration||t.vector())._init({x:i.ddx,y:i.ddy});for(var n in i)i.hasOwnProperty(n)&&(this[n]=i[n]);this.timeToLive=i.timeToLive||0,this.context=i.context||t.context,t._isImage(i.image)||t._isCanvas(i.image)?(this.image=i.image,this.width=i.image.width,this.height=i.image.height,this.advance=this._advanceSprite,this.draw=this._drawImage):i.animations?(this.animations=i.animations,this.currentAnimation=i.animations[Object.keys(i.animations)[0]],this.width=this.currentAnimation.width,this.height=this.currentAnimation.height,this.advance=this._advanceAnimation,this.draw=this._drawAnimation):(this.color=i.color,this.width=i.width,this.height=i.height,this.advance=this._advanceSprite,this.draw=this._drawRect)},get x(){return this.position.x},get y(){return this.position.y},get dx(){return this.velocity.x},get dy(){return this.velocity.y},get ddx(){return this.acceleration.x},get ddy(){return this.acceleration.y},set x(t){this.position.x=t},set y(t){this.position.y=t},set dx(t){this.velocity.x=t},set dy(t){this.velocity.y=t},set ddx(t){this.acceleration.x=t},set ddy(t){this.acceleration.y=t},isAlive:function(){return this.timeToLive>0},collidesWith:function(t){return this.x<t.x+t.width&&this.x+this.width>t.x&&this.y<t.y+t.height&&this.y+this.height>t.y},update:function(t){this.advance(t)},render:function(){this.draw()},playAnimation:function(t){this.currentAnimation=this.animations[t]},_advanceSprite:function(t){this.velocity.add(this.acceleration,t),this.position.add(this.velocity,t),this.timeToLive--},_advanceAnimation:function(t){this._advanceSprite(t),this.currentAnimation.update(t)},_drawRect:function(){this.context.fillStyle=this.color,this.context.fillRect(this.x,this.y,this.width,this.height)},_drawImage:function(){this.context.drawImage(this.image,this.x,this.y)},_drawAnimation:function(){this.currentAnimation.render({context:this.context,x:this.x,y:this.y})}},t}(kontra||{},Math);