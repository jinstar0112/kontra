!function(){let t,n=[],e=[],o={},a=[],r={},i={0:"left",1:"middle",2:"right"};function c(n){let e=n.x,o=n.y;n.anchor&&(e-=n.width*n.anchor.x,o-=n.height*n.anchor.y);let a=t.x-Math.max(e,Math.min(t.x,e+n.width)),r=t.y-Math.max(o,Math.min(t.y,o+n.height));return a*a+r*r<t.radius*t.radius}function s(){let o,a,r=e.length?e:n;for(let n=r.length-1;n>=0;n--)if(a=(o=r[n]).collidesWithPointer?o.collidesWithPointer(t):c(o))return o}function u(t){let n=void 0!==t.button?i[t.button]:"left";r[n]=!0,v(t,"onDown")}function f(t){let n=void 0!==t.button?i[t.button]:"left";r[n]=!1,v(t,"onUp")}function h(t){v(t,"onOver")}function d(t){r={}}function v(n,e){if(!kontra.canvas)return;let a,r;-1!==n.type.indexOf("mouse")?(a=n.pageX,r=n.pageY):(a=(n.touches[0]||n.changedTouches[0]).pageX,r=(n.touches[0]||n.changedTouches[0]).pageY);let i=a-kontra.canvas.offsetLeft,c=r-kontra.canvas.offsetTop,u=kontra.canvas;for(;u=u.offsetParent;)i-=u.offsetLeft,c-=u.offsetTop;let f,h=kontra.canvas.offsetHeight/kontra.canvas.height;i/=h,c/=h,t.x=i,t.y=c,n.target===kontra.canvas&&(n.preventDefault(),(f=s())&&f[e]&&f[e](n)),o[e]&&o[e](n,f)}t=kontra.pointer={x:0,y:0,radius:5,track(t){[].concat(t).map(function(t){t._r||(t._r=t.render,t.render=function(){n.push(this),this._r()},a.push(t))})},untrack(t,n){[].concat(t).map(function(t){t.render=t._r,t._r=n;let e=a.indexOf(t);-1!==e&&a.splice(e,1)})},over:t=>-1!==a.indexOf(t)&&s()===t,onDown(t){o.onDown=t},onUp(t){o.onUp=t},pressed:t=>!!r[t]},kontra._tick=function(){e.length=0,n.map(function(t){e.push(t)}),n.length=0},kontra._init=function(){kontra.canvas.addEventListener("mousedown",u),kontra.canvas.addEventListener("touchstart",u),kontra.canvas.addEventListener("mouseup",f),kontra.canvas.addEventListener("touchend",f),kontra.canvas.addEventListener("blur",d),kontra.canvas.addEventListener("mousemove",h),kontra.canvas.addEventListener("touchmove",h)}}();