!function(){var c=[],u=[],r={},o=[],t={},e={0:"left",1:"middle",2:"right"};function a(){for(var n,t,e,o,i,r=u.length?u:c,a=r.length-1;0<=a;a--)if((n=r[a]).collidesWithPointer?t=n.collidesWithPointer(d):(e=n,void 0,o=d.x-Math.max(e.x,Math.min(d.x,e.x+e.width)),i=d.y-Math.max(e.y,Math.min(d.y,e.y+e.height)),t=o*o+i*i<d.radius*d.radius),t)return n}function n(n){t[e[n.button]]=!0,s(n,"onDown")}function i(n){t[e[n.button]]=!1,s(n,"onUp")}function s(n,t){var e,o,i;kontra.canvas&&(-1!==n.type.indexOf("mouse")?(e=n.clientX,o=n.clientY):(e=(n.touches[0]||n.changedTouches[0]).clientX,o=(n.touches[0]||n.changedTouches[0]).clientY),d.x=e-kontra.canvas.offsetLeft,d.y=o-kontra.canvas.offsetTop,n.target===kontra.canvas&&(i=a())&&i[t]&&i[t](),r[t]&&r[t](n,i))}addEventListener("mousedown",n),addEventListener("touchstart",n),addEventListener("mouseup",i),addEventListener("touchend",i),addEventListener("blur",function(n){t={}}),addEventListener("mousemove",function(n){s(n,"onOver")});var d=kontra.pointer={x:0,y:0,radius:5,track:function(n){[].concat(n).map(function(n){n._r||(n._r=n.render,n.render=function(){c.push(this),this._r()},o.push(n))})},untrack:function(n,e){[].concat(n).map(function(n){n.render=n._r,n._r=e;var t=o.indexOf(n);-1!==t&&o.splice(t,1)})},over:function(n){return-1!==o.indexOf(n)&&a()===n},onDown:function(n){r.onDown=n},onUp:function(n){r.onUp=n},pressed:function(n){return!!t[n]}};kontra._tick=function(){u.length=0,c.map(function(n){u.push(n)}),c.length=0}}();