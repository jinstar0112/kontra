!function(){let t,n=[],e=[],o={},a=[],r={};function i(n){let e=n.x,o=n.y;n.anchor&&(e-=n.width*n.anchor.x,o-=n.height*n.anchor.y);let a=t.x-Math.max(e,Math.min(t.x,e+n.width)),r=t.y-Math.max(o,Math.min(t.y,o+n.height));return a*a+r*r<t.radius*t.radius}function c(){let o,a,r=e.length?e:n;for(let n=r.length-1;n>=0;n--)if(a=(o=r[n]).collidesWithPointer?o.collidesWithPointer(t):i(o))return o}function s(t){let n=void 0!==t.button?t.button:"left";r[n]=!0,h(t,"onDown")}function u(t){let n=void 0!==t.button?t.button:"left";r[n]=!1,h(t,"onUp")}function f(t){h(t,"onOver")}function h(n,e){if(!kontra.canvas)return;let a,r;-1!==n.type.indexOf("mouse")?(a=n.pageX,r=n.pageY):(a=(n.touches[0]||n.changedTouches[0]).pageX,r=(n.touches[0]||n.changedTouches[0]).pageY);let i=a-kontra.canvas.offsetLeft,s=r-kontra.canvas.offsetTop,u=kontra.canvas;for(;u=u.offsetParent;)i-=u.offsetLeft,s-=u.offsetTop;let f,h=kontra.canvas.offsetHeight/kontra.canvas.height;i/=h,s/=h,t.x=i,t.y=s,n.target===kontra.canvas&&(f=c())&&f[e]&&f[e](),o[e]&&o[e](n,f)}addEventListener("mousedown",s),addEventListener("touchstart",s),addEventListener("mouseup",u),addEventListener("touchend",u),addEventListener("blur",function(t){r={}}),addEventListener("mousemove",f),addEventListener("touchmove",f),t=kontra.pointer={x:0,y:0,radius:5,track(t){[].concat(t).map(function(t){t._r||(t._r=t.render,t.render=function(){n.push(this),this._r()},a.push(t))})},untrack(t,n){[].concat(t).map(function(t){t.render=t._r,t._r=n;let e=a.indexOf(t);-1!==e&&a.splice(e,1)})},over:t=>-1!==a.indexOf(t)&&c()===t,onDown(t){o.onDown=t},onUp(t){o.onUp=t},pressed:t=>!!r[t]},kontra._tick=function(){e.length=0,n.map(function(t){e.push(t)}),n.length=0}}();