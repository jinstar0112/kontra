!function(t){t.pool=function(e){e=e||{};var i,s=0,c=0;if(!t._isFunc(e.create)||!(i=e.create())||!(t._isFunc(i.update)&&t._isFunc(i.init)&&t._isFunc(i.isAlive)))throw Error("Must provide create() function which returns an object with init(), update(), and isAlive() functions");return{create:e.create,objects:[i],size:1,maxSize:e.maxSize||1/0,get:function(t){if(t=t||{},this.objects[0].isAlive()){if(this.size===this.maxSize)return;for(var e=0;e<this.size&&this.objects.length<this.maxSize;e++)this.objects.unshift(this.create());this.size=this.objects.length,s=this.size-1}var i=this.objects[0];i.init(t);for(var h=1;h<this.size;h++)this.objects[h-1]=this.objects[h];this.objects[s]=i,c++},getAliveObjects:function(){return this.objects.slice(this.objects.length-c)},clear:function(){c=s=this.objects.length=0,this.size=1,this.objects.push(this.create())},update:function(t){for(var e,i=s,h=Math.max(this.objects.length-c,0);i>=h;)if(e=this.objects[i],e.update(t),e.isAlive())i--;else{for(var n=i;n>0;n--)this.objects[n]=this.objects[n-1];this.objects[0]=e,c--,h++}},render:function(){for(var t=Math.max(this.objects.length-c,0),e=s;e>=t;e--)this.objects[e].render&&this.objects[e].render()}}}}(kontra);