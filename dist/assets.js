!function(d){var o=/(jpeg|jpg|gif|png)$/,i=/(wav|mp3|ogg|aac)$/,a=/^no$/,n=new Audio,p={wav:"",mp3:n.canPlayType("audio/mpeg;").replace(a,""),ogg:n.canPlayType('audio/ogg; codecs="vorbis"').replace(a,""),aac:n.canPlayType("audio/aac;").replace(a,"")};function f(){for(var a=[],n=0;n<arguments.length;n++)arguments[n]&&a.push(arguments[n].trim().replace(new RegExp("(^[/]{"+(a[0]?1:2)+",}|[/]*$)","g"),""));return a.join("/")}function g(a){return a.split(".").pop()}function l(a){var n=a.replace("."+g(a),"");return 0==n.indexOf("/")&&0==n.lastIndexOf("/")?n.substr(1):n}function s(t){var e=l(t),r=new Image,a=kontra.assets,o=a.images;return t=f(a.imagePath,t),new d(function(a,n){r.onload=function(){o[e]=o[t]=this,a(this)},r.onerror=function(){n(t)},r.src=t})}function u(t){var e,r,o,i,s,a=kontra.assets,u=a.audio,c=a.audioPath;return Array.isArray(t)||(t=[t]),new d(function(a,n){for(s=0;e=t[s];s++)if(p[g(e)]){o=e;break}o?(r=l(o),i=new Audio,e=f(c,o),i.addEventListener("canplay",function(){u[r]=u[e]=this,a(this)}),i.onerror=function(){n(e)},i.src=e,i.load()):n("")})}function c(e){var r=l(e),o=new XMLHttpRequest,a=kontra.assets,i=a.data;return e=f(a.dataPath,e),new d(function(n,t){o.addEventListener("load",function(){var a=o.responseText;if(200!==o.status)return t(a);try{a=JSON.parse(a)}catch(a){}i[r]=i[e]=a,n(a)}),o.open("GET",e,!0),o.send()})}kontra.assets={images:{},audio:{},data:{},imagePath:"",audioPath:"",dataPath:"",load:function(){var a,n,t,e,r=[];for(t=0;n=arguments[t];t++)e=(a=g(Array.isArray(n)?n[0]:n)).match(o)?s(n):a.match(i)?u(n):c(n),r.push(e);return d.all(r)},_canUse:p}}(Promise);