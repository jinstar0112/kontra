!function(a){function t(a){return a.split(".").pop()}function n(a){return a.replace("."+t(a),"")}var o=/(jpeg|jpg|gif|png)$/,e=/(wav|mp3|ogg|aac)$/,i=/^no$/,r=new Audio,u={wav:"",mp3:r.canPlayType("audio/mpeg;").replace(i,""),ogg:r.canPlayType('audio/ogg; codecs="vorbis"').replace(i,""),aac:r.canPlayType("audio/aac;").replace(i,"")};kontra.assets={images:{},audios:{},data:{},imagePath:"",audioPath:"",dataPath:"",load:function(){var n,i,r,u,s,c=[];for(s=0;u=arguments[s];s++)i=Array.isArray(u)?u[0]:u,r=t(i),n=r.match(o)?"Image":r.match(e)?"Audio":"Data",c.push(this["load"+n](u));return a.all(c)},loadImage:function(t){var o=n(t),e=new Image,i=this.images;return t=this.imagePath+t,new a(function(a,n){e.onload=function(){i[o]=i[t]=this,a(this)},e.onerror=function(){n("Unable to load image "+t)},e.src=t})},loadAudio:function(o){var e,i,r,s,c,d=this.audios,l=this.audioPath;return Array.isArray(o)||(o=[o]),new a(function(a,p){for(c=0;e=o[c];c++)if(u[t(e)]){r=e;break}r?(i=n(r),s=new Audio,e=l+r,s.addEventListener("canplay",function(){d[i]=d[e]=this,a(this)}),s.onerror=function(){p("Unable to load audio "+e)},s.src=e,s.load()):p("cannot play any of the audio formats provided")})},loadData:function(t){var o=new XMLHttpRequest,e=n(t),i=this.dataPath+t,r=this.data;return new a(function(a,t){o.addEventListener("load",function(){var n=o.responseText;if(200!==o.status)return t(n);try{n=JSON.parse(n)}catch(u){}r[e]=r[i]=n,a(n)}),o.open("GET",i,!0),o.send()})}}}(Promise);