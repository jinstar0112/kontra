!function(){let e,n=/(jpeg|jpg|gif|png)$/,t=/(wav|mp3|ogg|aac)$/,a=/^no$/,o=/^\//,i=/\/$/,r=new Audio,c={wav:"",mp3:r.canPlayType("audio/mpeg;").replace(a,""),ogg:r.canPlayType('audio/ogg; codecs="vorbis"').replace(a,""),aac:r.canPlayType("audio/aac;").replace(a,"")};function u(e,n){return[e.replace(i,""),e?n.replace(o,""):n].filter(e=>e).join("/")}function l(e){return e.split(".").pop()}function d(e){let n=e.replace("."+l(e),"");return 2==n.split("/").length?n.replace(o,""):n}function f(n,t){return new Promise(function(a,o){let i=new Image;t=u(e.imagePath,n),i.onload=function(){let o=e._u(t,window.location.href);e.images[d(n)]=e.images[t]=e.images[o]=this,a(this)},i.onerror=function(){o(t)},i.src=t})}function s(n,t,a){return new Promise(function(o,i){if(n=[].concat(n).reduce(function(e,n){return c[l(n)]?n:e},a)){let a=new Audio;t=u(e.audioPath,n),a.addEventListener("canplay",function(){let a=e._u(t,window.location.href);e.audio[d(n)]=e.audio[t]=e.audio[a]=this,o(this)}),a.onerror=function(){i(t)},a.src=t,a.load()}else i(n)})}function p(n,t){return t=u(e.dataPath,n),fetch(t).then(function(e){if(!e.ok)throw e;return e.clone().json().catch(function(){return e.text()})}).then(function(a){let o=e._u(t,window.location.href);return"object"==typeof a&&e._d.set(a,o),e.data[d(n)]=e.data[t]=e.data[o]=a,a})}e=kontra.assets={images:{},audio:{},data:{},_d:new WeakMap,_u:(e,n)=>new URL(e,n).href,imagePath:"",audioPath:"",dataPath:"",load(){let e,a,o,i,r,c=[];for(i=0;o=arguments[i];i++)r=(a=l(e=[].concat(o)[0])).match(n)?f(o):a.match(t)?s(o):p(o),c.push(r);return Promise.all(c)}}}();