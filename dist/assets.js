!function(a){function n(){for(var a=[],n=0;n<arguments.length;n++)arguments[n]&&a.push(arguments[n].trim().replace(new RegExp("(^[/]{"+(a[0]?1:2)+",}|[/]*$)","g"),""));return a.join("/")}function t(a){return a.split(".").pop()}function e(a){var n=a.replace("."+t(a),"");return 0==n.indexOf("/")&&0==n.lastIndexOf("/")?n.substr(1):n}function r(t){var r=e(t),o=new Image,i=kontra.assets,s=i.images;return t=n(i.imagePath,t),new a(function(a,n){o.onload=function(){s[r]=s[t]=this,a(this)},o.onerror=function(){n("Unable to load image "+t)},o.src=t})}function o(r){var o,i,s,u,c,d=kontra.assets,f=d.audio,l=d.audioPath;return Array.isArray(r)||(r=[r]),new a(function(a,d){for(c=0;o=r[c];c++)if(p[t(o)]){s=o;break}s?(i=e(s),u=new Audio,o=n(l,s),u.addEventListener("canplay",function(){f[i]=f[o]=this,a(this)}),u.onerror=function(){d("Unable to load audio "+o)},u.src=o,u.load()):d("cannot play any of the audio formats provided")})}function i(t){var r=e(t),o=new XMLHttpRequest,i=kontra.assets,s=i.data;return t=n(i.dataPath,t),new a(function(a,n){o.addEventListener("load",function(){var e=o.responseText;if(200!==o.status)return n(e);try{e=JSON.parse(e)}catch(i){}s[r]=s[t]=e,a(e)}),o.open("GET",t,!0),o.send()})}var s=/(jpeg|jpg|gif|png)$/,u=/(wav|mp3|ogg|aac)$/,c=/^no$/,d=new Audio,p={wav:"",mp3:d.canPlayType("audio/mpeg;").replace(c,""),ogg:d.canPlayType('audio/ogg; codecs="vorbis"').replace(c,""),aac:d.canPlayType("audio/aac;").replace(c,"")};kontra.assets={images:{},audio:{},data:{},imagePath:"",audioPath:"",dataPath:"",load:function(){var n,e,c,d,p,f=[];for(d=0;c=arguments[d];d++)n=Array.isArray(c)?c[0]:c,e=t(n),p=e.match(s)?r(c):e.match(u)?o(c):i(c),f.push(p);return a.all(f)},_canUse:p}}(Promise);