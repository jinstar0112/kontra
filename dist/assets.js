!function(a){function n(){for(var a=[],n=0;n<arguments.length;n++)arguments[n]&&a.push(arguments[n].trim().replace(new RegExp("(^[/]{"+(a[0]?1:2)+",}|[/]*$)","g"),""));return a.join("/")}function t(a){return a.split(".").pop()}function e(a){var n=a.replace("."+t(a),"");return 0==n.indexOf("/")&&0==n.lastIndexOf("/")?n.substr(1):n}var o=/(jpeg|jpg|gif|png)$/,r=/(wav|mp3|ogg|aac)$/,i=/^no$/,u=new Audio,s={wav:"",mp3:u.canPlayType("audio/mpeg;").replace(i,""),ogg:u.canPlayType('audio/ogg; codecs="vorbis"').replace(i,""),aac:u.canPlayType("audio/aac;").replace(i,"")};kontra.assets={images:{},audio:{},data:{},imagePath:"",audioPath:"",dataPath:"",load:function(){var n,e,i,u,s,c=[];for(s=0;u=arguments[s];s++)e=Array.isArray(u)?u[0]:u,i=t(e),n=i.match(o)?"Image":i.match(r)?"Audio":"Data",c.push(this["load"+n](u));return a.all(c)},loadImage:function(t){var o=e(t),r=new Image,i=this.images;return t=n(this.imagePath,t),new a(function(a,n){r.onload=function(){i[o]=i[t]=this,a(this)},r.onerror=function(){n("Unable to load image "+t)},r.src=t})},loadAudio:function(o){var r,i,u,c,d,l=this.audio,p=this.audioPath;return Array.isArray(o)||(o=[o]),new a(function(a,f){for(d=0;r=o[d];d++)if(s[t(r)]){u=r;break}u?(i=e(u),c=new Audio,r=n(p,u),c.addEventListener("canplay",function(){l[i]=l[r]=this,a(this)}),c.onerror=function(){f("Unable to load audio "+r)},c.src=r,c.load()):f("cannot play any of the audio formats provided")})},loadData:function(t){var o=e(t),r=n(this.dataPath,t),i=this.data,u=new XMLHttpRequest;return new a(function(a,n){u.addEventListener("load",function(){var t=u.responseText;if(200!==u.status)return n(t);try{t=JSON.parse(t)}catch(e){}i[o]=i[r]=t,a(t)}),u.open("GET",r,!0),u.send()})},_canUse:s}}(Promise);